---
title: gsap.utils.snap()
---

ğŸ“š æ•è·ï¼ˆæˆ–è€…å¸é™„åˆ°ï¼‰ç‰¹å®šçš„å¢é‡æˆ–è€…æ˜¯æ•°ç»„ä¸­æœ€æ¥è¿‘çš„å€¼ï¼š

- è¿˜å¯ä»¥æä¾›ä¸€ä¸ªå¯é€‰çš„ `åŠå¾„ï¼ˆradiusï¼‰`
- è¿˜æœ‰2ç»´æ•°æ®ï¼Œåæ ‡ç‚¹è¿›è¡Œå¸é™„
- ä¹Ÿæ˜¯å­˜åœ¨2ç§å½¢å¼ï¼Œä¸€ç§ç›´æ¥è¿”å›ç»“æœï¼Œä¸€ç§æ˜¯è¿”å›ä¸€ä¸ªå¯å¤ç”¨çš„å‡½æ•°

å®ƒæœ‰ `6` ç§å½¢å¼ï¼ˆä½†å¯ä»¥åˆ†ä¸º3ç»„ï¼‰ï¼šï¼ˆç”¨æ³•ç¡®å®æ¯”è¾ƒå¤šï¼Œç†è§£èµ·æ¥ä¹Ÿæœ‰ç‚¹ç»•ğŸ˜…ï¼‰

1. `snap(snapIncrement, valueToSnap)` ç›´æ¥è¿”å›ç»“æœ
   - `snapIncrement: Number` - æ•è·çš„å¢é‡ï¼Œæ¯”å¦‚ `snapIncrement` è®¾ç½®ä¸º `5`ï¼Œè¡¨ç¤ºå¢é‡ä¸º `5` çš„å€æ•°ï¼Œå³ `[0, 5, 10, ...25 ..., 95...]` ç­‰ç­‰
   - `valueToSnap: Number` - ç»“æŸå€¼ï¼Œå¯ä»¥æ˜¯ä»»ä½•æ•°æ®ç±»å‹ï¼Œåªè¦å®ƒå’Œ `startValue` åŒ¹é…
2. `snap(snapIncrment)` è¿”å›ä¸€ä¸ªå¯å¤ç”¨çš„å‡½æ•°
   - `snapIncrement: Number` - åŒä¸Š
3. `snap(array, valueToSnap)` valueToSnap åŒ¹é…arrayä¸­æœ€æ¥è¿‘çš„å€¼ï¼Œç›´æ¥è¿”å›ç»“æœ
   - `array: Array` - æ•è·çš„æ•°ç»„å€¼
   - `valueToSnap: Number` - å¾…æ•è·çš„å€¼
4. `snap(array)` è¿”å›ä¸€ä¸ªå¯å¤ç”¨çš„å‡½æ•°
   - `array: Array` - åŒä¸Š
5. `snap(objectWithRadius, valueToSnap)` åŒ…å« `radius` çš„æ•è·æ–¹å¼ï¼Œå¦‚æœæ²¡æœ‰è¢«æ•è·åˆ°ï¼Œåˆ™ç›´æ¥è¿”å›åŸæ¥çš„å€¼ï¼Œæœ€å¤æ‚çš„ä¸€ç§ç”¨æ³•ğŸ¤©ï¼Œç›´æ¥è¿”å›ç»“æœ
   - `objectWithRadius: Object` - å¯ä»¥æ˜¯ `{values: [0, 20, 60], radius: 5}` æˆ–è€…æ˜¯ `{increment: 100, radius: 50}` è¿™ç§å½¢å¼ï¼Œ**valuesè¿˜å¯ä»¥æ˜¯å¯¹è±¡æ•°ç»„ï¼ŒåŒ…å« `x` & `y`ï¼Œ å¯¹2Dåæ ‡ç‚¹è¿›è¡Œæ•è·**
   - `valueToSnap: Number` - å¾…æ•è·çš„å€¼
6. `snap(objectWithRadius)` è¿”å›å¯å¤ç”¨çš„å‡½æ•°
   - `objectWithRadius: Object` - åŒä¸Š



1ï¸âƒ£ `åŒ…å«snapIncrement` çš„å½¢å¼

ğŸŒ° ç›´æ¥è¿”å›ç»“æœ

```js {1-3}
// ğŸ’¡ ç›¸å½“äºå¯ä»¥æ•è·çš„å€¼ä¸º `10` çš„æ•´æ•°å€
// ... -10 0 10 20 30 ...
// `23.5` ç¦» `20` æœ€è¿‘ å› æ­¤è¢«æ•è·ï¼Œè¿”å›ç»“æœä¸º `20`
gsap.utils.snap(10, 23.5) // 20
```

è¿”å›å¯å¤ç”¨å¾—å‡½æ•°

```js
const snap = gsap.utils.snap(2)

snap(9.5) // 10
snap(-3.2) // -4
```



2ï¸âƒ£ `åŒ…å«æ•°ç»„` çš„å½¢å¼

ğŸŒ° ç›´æ¥è¿”å›ç»“æœ

```js {1}
// ğŸ’¡ æ•°ç»„ä¸­ç¦» `65` æœ€è¿‘çš„æ˜¯ `50` å› æ­¤è¢« `50` æ•è·
gsap.utils.snap([100, 50, 500], 65) // 50

gsap.utils.snap([100, 50, 500], 315) // 500
```

è¿”å›å¯å¤ç”¨å¾—å‡½æ•°

```js
const snap = gsap.utils.snap([100, 50, 500])

snap(85)  // 100
snap(415) // 500
```



3ï¸âƒ£ `åŒ…å« objectWithRadius` é…ç½®å½¢å¼



> 1. `valuesæ•°ç»„ + radius`

```js
// æ²¡æœ‰è¢«æ•è·ï¼Œç›´æ¥è¿”å›åŸå€¼
gsap.utils.snap({
  values: [0, 100, 300],
  radius: 20
}, 30.5) // 30.5

// è¢« 100æ•è·ï¼Œè¿”å› 100
gsap.utils.snap({
  values: [0, 100, 300],
  radius: 20
}, 85) // 100
```

æ•°ç»„æ•è·çš„åŠå¾„ä¸º `20`ï¼Œæ•°ç»„ä¸­èƒ½æ•è·çš„èŒƒå›´å¦‚ä¸‹å›¾åœ†åœˆæ‰€ç¤ºï¼Œè€Œ `30.5` ä¸åœ¨3ä¸ªæ•è·åœˆä¸­ï¼Œå› æ­¤æ²¡æœ‰è¢«æ•è·ï¼ŒåŸè·¯ç›´æ¥è¿”å› `30.5`ï¼›è€Œ `85` åˆ™è¢« `100` çš„æ•è·åœˆæ•è·ï¼Œå› æ­¤è¿”å› `100`

![snap-radius](./imgs/snap-radius.png)







> 2. `valueså¯¹è±¡æ•°ç»„ + radius` å¯¹äºŒç»´ç‚¹è¿›è¡Œæ•è·

è¿™ä¸ªåŸç†å…¶å®å’Œä¸Šé¢çš„ç±»ä¼¼ï¼Œä¹Ÿæ˜¯å»ºç«‹ä¸€ä¸ªæ•è·åœˆï¼Œç„¶åçœ‹ç‚¹æ˜¯å¦åœ¨æŸä¸ªåœˆå†…

```js
// è¢«æ•è·
const point = { x: 8, y: 8}
gsap.utils.snap({
  values: [
    {x: 0, y: 0},
    {x: 10, y: 10},
    {x: 20, y: 20}
  ],
  radius: 5
}, point) // {x: 10, y: 10}

// æ²¡æœ‰è¢«æ•è·ï¼Œç›´æ¥è¿”å›åŸæ¥çš„å€¼ {x: 14, y: 16}
gsap.utils.snap({
  values: [
    {x: 0, y: 0},
    {x: 10, y: 10},
    {x: 20, y: 20}
  ],
  radius: 5
}, {x: 14, y: 16})
```

å¦‚å›¾æ‰€ç¤ºï¼Œ`(8, 8)` åæ ‡ç‚¹è¢« `(10, 10)`ä¸ºä¸­å¿ƒï¼ŒåŠå¾„ä¸º `5` çš„æ•è·åœˆæ•è·ï¼Œå› æ­¤è¿”å› `{x: 10, y: 10}`

![snap-points](./imgs/snap-points.png)



> 3. `increment + radius` å¯¹è±¡å½¢å¼

è¿™ä¸ªå…¶å®å’Œ `snap(snapIncrement, valueToSnap)` ç±»ä¼¼ï¼Œä½†æ˜¯å®ƒåˆç»“åˆäº† `values` æ•è·åœˆçš„æ¦‚å¿µï¼š

```js {1-4}
// ç†è§£
// å¯ä»¥ç†è§£ä¸º values: [..., -500, 0, 500, 1000, ...]
// åŠå¾„ä¸º 150
// `975` åœ¨ (1000, 0)ä¸­å¿ƒï¼ŒåŠå¾„ä¸º 150 çš„æ•è·åœˆä¸­
gsap.utils.snap({
  increment: 500,
  radius: 150
}, 975) // 1000
```



å¤ç”¨å‡½æ•°çš„å†™æ³•ï¼Œè¿™é‡Œçœç•¥ï¼Œå¤§åŒå°å¼‚ã€‚



æ–‡æ¡£åœ°å€ï¼š

- [gsap.utils.snap()](https://greensock.com/docs/v3/GSAP/UtilityMethods/snap())



2022å¹´11æœˆ11æ—¥16:11:41

